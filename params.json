{"name":"Okbuck","tagline":"OkBuck is a gradle plugin, aiming to help developers utilize the super fast build system: BUCK, based on the existing project with Android Studio + gradle, and keep both build systems work, with less to only 10 lines of configuration.","body":"# OkBuck\r\n[ ![Download](https://img.shields.io/bintray/v/piasy/maven/OkBuck.svg) ](https://bintray.com/piasy/maven/OkBuck/_latestVersion)\r\n[![Master branch build status](https://travis-ci.org/Piasy/OkBuck.svg?branch=master)](https://travis-ci.org/Piasy/OkBuck)\r\n[![Android Arsenal](https://img.shields.io/badge/Android%20Arsenal-OkBuck-green.svg?style=flat)](https://android-arsenal.com/details/1/2593)\r\n\r\nOkBuck is a gradle plugin, aiming to help developers utilize the super fast build system: BUCK, based on the existing project with Android Studio + gradle, and keep both build systems work, with less to only **10 lines of configuration**.\r\n\r\n[Wiki](https://github.com/Piasy/OkBuck/wiki), [中文版](README-zh.md)\r\n\r\n## Why OkBuck?\r\nAndroid Studio + Gradle has already been many Android developers' option, and to migrate to buck, there are many works to be done, which are difficult and buggy. OkBuck aims to provide a gradle plugin, which will do these buggy job for you automaticlly after several lines configuration.\r\n\r\nFurther more, you can still use OkBuck to maintain your BUCK build system when your gradle configurations changes, OkBuck let you even needn't write one line of the magic BUCK script! \r\n\r\n## What will OkBuck do for you?\r\n+  Generate `.buckconfig`.\r\n+  Copy third-party libraries' jar/aar files to your rootProject directory.\r\n+  Generate `BUCK` file for third-party libraries and each sub modules.\r\n+  After you run `./gradlew okbuck` in your rootProject root directory, you can run `buck install appFlavorVariant` (suppose your application module names `app` and you have already installed BUCK, the `Flavor` and `Variant` part is just like Gradle task names, if you have a flavor `dev`, then you can run `buck install` with `appDevDebug`, `appDevRelease`, if no flavor, only `appDebug` and `appRelease` available).\r\n\r\n## How to use OkBuck?\r\n1. Add this lines into buildscript dependencies part of root rootProject build.gradle (the latest version is displayed on the download badge above): \r\n\r\n    ```groovy\r\n    classpath \"com.github.piasy:okbuck-gradle-plugin:${latest version}\"\r\n    ```\r\n  +  ${latest version} should be substituted with the real specific version, the latest version could be see from the bintray badge on the top of this document.\r\n\r\n2. Add this line into root rootProject build.gradle: \r\n\r\n    ```groovy\r\n    apply plugin: 'com.github.piasy.okbuck-gradle-plugin'\r\n    ```\r\n\r\n3. Add this `okbuck` block into root rootProject build.gradle:\r\n    \r\n    ```gradle\r\n    okbuck {\r\n        target \"android-23\"\r\n        overwrite true\r\n        resPackages = [\r\n            'dummylibrary': 'com.github.piasy.okbuck.example.dummylibrary',\r\n            'app': 'com.github.piasy.okbuck.example',\r\n        ]\r\n    }\r\n    ```\r\n  +  Note that `okbuck-gradle-plugin` hosts on jcenter, so you need to add jcenter to your buildscript repositories and allprojects repositories list, like below, also note that the declare order matters.\r\n  \r\n    ```gradle\r\n      buildscript {\r\n          repositories {\r\n              jcenter()\r\n          }\r\n          dependencies {\r\n              classpath 'com.android.tools.build:gradle:1.3.0'\r\n              classpath \"com.github.piasy:okbuck-gradle-plugin:0.3.3\"\r\n          }\r\n      }\r\n      \r\n      allprojects {\r\n          repositories {\r\n              jcenter()\r\n          }\r\n      }\r\n      \r\n      apply plugin: 'com.github.piasy.okbuck-gradle-plugin'\r\n      \r\n      okbuck {\r\n          ...\r\n      }\r\n    ```\r\n    \r\n4. Run `./gradlew okbuck` and then run `buck install appFlavorVariant`, enjoy your life with BUCK.\r\n\r\n## Explanations\r\n+  `android-23` works equally with `compileSdkVersion 23`.\r\n+  `overwrite` is used to control whether overwrite existing buck files; \r\n+  OkBuck will extract signing config defined in your build.gradle, and the generated BUCK signing configs is put under `/.okbuck/keystore` folder.\r\n  +  You needn't do anything if you have already set **only one** signing config in your build.gradle, but note that there is a default signing config named `debug` generated by android gradle plugin.\r\n  +  But you need to configure git to ignore your signing secret, add this line to your **root rootProject .gitignore file**:\r\n\r\n    ```\r\n    .okbuck/keystore\r\n    ```\r\n  +  If you defined multiple signing configs (including the default `debug` one), or you want to put OkBuck's generated signing config in another folder which **must be under your root rootProject folder**, you can set it like below, `keystoreDir` is used to set the path OkBuck to put your generated signing config (relative to your root rootProject folder, no prefix `/`), and `signConfigName` is to set the name of the signing config you want to use.\r\n    \r\n    ```gradle\r\n    okbuck {\r\n        target \"android-23\"\r\n        keystoreDir \".okbuck/keystore\"\r\n        signConfigName \"release\"\r\n        overwrite true\r\n        resPackages = [\r\n            'dummylibrary': 'com.github.piasy.okbuck.example.dummylibrary',\r\n            'app': 'com.github.piasy.okbuck.example',\r\n        ]\r\n    }\r\n    ```\r\n  +  But also remember to configure git to ignore your signing secret.\r\n  +  Full example could be found in the app module of this repo, [root rootProject build.gradle](build.gradle), [app module build.gradle](app/build.gradle).\r\n\r\n+  `resPackages` is used to set Android library module and Android Application module's package name for generated resources (`R` in common cases), you need substitute dummylibrary/app with your own module name (before the colon, if your module is not in the project root dir, i.e. in your `settings.gradle` is `include ':lib:common'`, you should use `common` rather than `:lib:common`), and set the corresponding package name after the colon, which should be the same package name specified in the corresponding module's `AndroidManifest.xml`.\r\n    \r\n+  There are 2 tasks added into your gradle project after apply OkBuck, `okbuck`, and `okbuckClean`.\r\n    +  `okbuckClean` will **delete all** files generated by OkBuck.\r\n    +  `okbuck` will generate all flavor and variant BUCK configs, and each flavor + variant combination will have an BUCK alias, e.g. `appDevDebug`, `appProdRelease`, `anotherappDebug` etc.\r\n\r\n## More jobs need to be done\r\nOkBuck can only generate BUCK configs for you, so if your source code is incompatible with BUCK, you need do more jobs.\r\n\r\nRead more on [Known caveats wiki page](https://github.com/Piasy/OkBuck/wiki/Known-caveats). \r\n\r\nMaybe there are more caveats waiting for you, but for the super fast build brought by buck, it's worthwhile.\r\n\r\nThe rest modules in this repo is a full example usage of OkBuck.\r\n\r\n## [Known caveats](https://github.com/Piasy/OkBuck/wiki/Known-caveats)\r\n\r\n## Troubleshooting\r\nIf you come with bugs of OkBuck, please [open an issue](https://github.com/Piasy/OkBuck/issues/new), and it's really appreciated to post the output of `./gradle okbuck --stacktrace` at the same time.\r\n\r\n## Contribution\r\nContributions are welcome! See the [detail todo list](https://github.com/Piasy/OkBuck/wiki/TODO-list).\r\n\r\nIf you want to help improve OkBuck, please comment on the corresponding issue, with your expected fix due date, I'll pull you in and assign it to you, and push you.\r\n\r\nNote that you need create an empty file named `bintray.properties` in `/buildSrc/`, it contains the bintray config, and you don't need it.\r\n\r\n## Acknowledgement\r\n+  Thanks for Facebook open source [buck](https://github.com/facebook/buck) build system.\r\n+  Thanks for the discussion and help from [promeG](https://github.com/promeG/) during my development.\r\n+  Thanks for [ヤ①個亼簡單](#) of the manifest merge contribution, and the idea of multi-product flavor support.\r\n+  Thanks for [hujin1860@gmail.com](mailto:hujin1860@gmail.com) of the manifest genrule advice.\r\n\r\n## Who is using OkBuck?\r\nUser | Repo\r\n--- | ---\r\n[Piasy](https://github.com/Piasy) | [AndroidTDDBootStrap](https://github.com/Piasy/AndroidTDDBootStrap)\r\n\r\nIf you are using OkBuck in your open source project, [send me a e-mail](mailto:xz4215@gmail.com) with your repo url, I'll add your repo in this list.\r\n\r\n## Change log\r\n+  0.4.9: fix bug in exopackage\r\n+  0.4.8: minimal support for exopackage\r\n+  0.4.7: add multidex support, see more at [wiki page Multidex support](https://github.com/Piasy/OkBuck/wiki/Multidex-support)\r\n+  0.4.6: solve problems when generate `AndroidManifest.xml` like below:\r\n  \r\n  ```bash\r\n  [AndroidManifest.xml:7, AndroidManifest.xml:3] Trying to merge incompatible /manifest/uses-permission[@name=android.permission.ACCESS_WIFI_STATE] element:\r\n    <uses-permission android:name=android.permission.ACCESS_WIFI_STATE>\r\n  --    @android:name = android.permission.ACCESS_WIFI_STATE\r\n  ++    @ns0:name = android.permission.ACCESS_WIFI_STATE\r\n  ```\r\n\r\n+  0.4.5: use `genrule` to generate `AndroidManifest.xml`\r\n+  0.4.4: fix [#42](https://github.com/Piasy/OkBuck/issues/42)\r\n+  0.4.2: different libraries may have the same name, so turn `checkDependencyDiffersByVersion` to be optional temporarily\r\n+  0.4.1: naive way to fix problems in `checkDependencyDiffersByVersion`\r\n+  0.4.0:\r\n  +  multi-product flavor support! although need improve it.\r\n  +  fix [#7](https://github.com/Piasy/OkBuck/issues/7)\r\n  +  fix [#8](https://github.com/Piasy/OkBuck/issues/8)\r\n  +  fix [#29](https://github.com/Piasy/OkBuck/issues/29)\r\n  +  fix [#30](https://github.com/Piasy/OkBuck/issues/30)\r\n+  0.3.5: fix [#39](https://github.com/Piasy/OkBuck/issues/39)\r\n+  0.3.4: fix [#22](https://github.com/Piasy/OkBuck/issues/22) prebuilt native library support\r\n+  0.3.3:\r\n  +  fix [#25](https://github.com/Piasy/OkBuck/issues/25), [#27](https://github.com/Piasy/OkBuck/issues/27)\r\n  +  merge [#35](https://github.com/Piasy/OkBuck/pull/35)\r\n+  0.3.2: better error message\r\n+  0.3.1: fix [#31](https://github.com/Piasy/OkBuck/issues/31)\r\n+  0.3.0:\r\n  +  fix [#15](https://github.com/Piasy/OkBuck/issues/15) again.\r\n  +  better dependency process, partly fix [Known caveats: handle dependency conflict](https://github.com/Piasy/OkBuck/wiki/Known-caveats#handle-dependency-conflict)\r\n  +  **refactor round 2**, ready for your contributions!\r\n+  0.2.7:\r\n  +  fix overwrite doesn't work bug\r\n  +  fix bug when Android library module doesn't have res dir\r\n  +  .buckconfig will ignore .svn dirs\r\n  +  fix [#6](https://github.com/Piasy/OkBuck/issues/6) again...\r\n+  0.2.6: fix [#14](https://github.com/Piasy/OkBuck/issues/14)\r\n+  0.2.5: fix [#15](https://github.com/Piasy/OkBuck/issues/15)\r\n+  0.2.4: fix [#12](https://github.com/Piasy/OkBuck/issues/12)\r\n+  0.2.3: fix [#11](https://github.com/Piasy/OkBuck/issues/11)\r\n+  0.2.2: fix [#6](https://github.com/Piasy/OkBuck/issues/6)\r\n+  [v0.2.1](https://github.com/Piasy/OkBuck/releases/tag/v0.2.1)\r\n+  [v0.1.0](https://github.com/Piasy/OkBuck/releases/tag/v0.1.0)\r\n+  [v0.0.1](https://github.com/Piasy/OkBuck/releases/tag/v0.0.1)","google":"UA-68342301-2","note":"Don't delete this file! It's used internally to help with page regeneration."}